{% extends "layouts/master.html.j2" %}

{% block body %}
<nav aria-label="breadcrumb">
  <ul>
      <li><a href="../index.html">Home</a></li>
      <li>Skills</li>
      <li>{{ skill_name }}</li>
  </ul>
</nav>

<h1>Projects using {{ skill_name }}</h1>

<div class="project-grid">
    {% for item in skill_projects %}
    <article>
        <header>
            {# Handle Polymorphism: GitHub Project vs PyPI Package #}
            {% set name = item.name if item.name is defined else item.package_name %}
            {% set url = item.url or item.repository_url or item.docs_url or ('https://pypi.org/project/' ~ name) %}

            <strong><a href="{{ url }}">{{ name }}</a></strong>

            {# Optional Badge to distinguish type #}
            {% if item.package_name is defined %}
                <span class="meta" style="font-size:0.7rem; border:1px solid #ddd; padding:2px 4px; border-radius:3px;">PyPI</span>
            {% endif %}
        </header>

        <p>
            {{ item.description if item.description is defined else item.summary }}
        </p>

        <footer>
            <small>
                {% for tag in item.tags %}
                    {% if tag|lower == skill_name|lower %}
                        <strong>#{{ tag }}</strong>
                    {% else %}
                        #{{ tag }}
                    {% endif %}
                {% endfor %}

                {# Explicitly show language if available on GitHub projects #}
                {% if item.primary_language and item.primary_language|lower == skill_name|lower %}
                     <strong>#{{ item.primary_language }}</strong>
                {% elif item.primary_language %}
                     #{{ item.primary_language }}
                {% endif %}
            </small>
        </footer>
    </article>
    {% endfor %}
</div>

<p style="margin-top: 2rem;">
    <a href="../index.html">&larr; Back to Resume</a>
</p>
{% endblock %}