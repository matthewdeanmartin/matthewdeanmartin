{% extends "layouts/master.md.j2" %}
{# --- MACRO DEFINITIONS --- #}
{% macro section_talks() %}
## Talks & Presentations
{% for talk in identity.talks %}
{{ talk.icon or "‚ñ∂Ô∏è" }} [{{ talk.title }}]({{ talk.url }})<br>
{% endfor %}
{% endmacro %}


{% macro section_skills() %}
## Skills
{{ identity.content.skills_intro }}

{# Render Headers using only featured groups #}
| {% for cat in identity.featured_skill_groups %}{{ cat.category }} | {% endfor +%}
| {% for cat in identity.featured_skill_groups %}-{{ "-" * cat.category|length }}- | {% endfor +%}
{# Render Transposed Rows using only featured skills #}
{% for row in identity.featured_skill_rows -%}
| {% for cell in row %}{{ cell }}<br> | {% endfor +%}
{% endfor +%}
{% endmacro %}

{% macro section_resumes() %}
## Resumes
{% for r in resumes if r.status == "active" %}
{{ r.icon or "üìÑ" }} [{{ r.label }}]({{ r.url }}){% if r.description %} {{ r.description }}{% endif %}<br>
{% endfor %}
{% endmacro %}

{% macro section_projects() %}
## Projects

{% if config.modes.current == "job_hunting" %}
{# --- MODE: JOB HUNTING (Simplified List) --- #}
*Selected highlights. For a complete portfolio, [view the full project list](projects.md).*

{% for project in projects %}
    {% if project.featured %}
* **[{{ project.name }}]({{ project.url or project.repository_url }})**
  <br>{{ project.description }}
  <br>_{{ project.tags | join(", ") }}_
    {% endif %}
{% endfor %}

{% else %}
{# --- MODE: PROJECT PROMOTION (Full Table) --- #}
| Project | Status | Description |
|:--------|:-------|:------------|
{% for project in projects %}
| [{{ project.name }}]({{ project.url or project.repository_url }}) | {{ project.status }} | {{ project.description }} <br> <sub>Tags: {{ project.tags|join(", ") }}</sub> |
{% endfor %}

{% endif %}
{% endmacro %}

{% macro section_experience() %}
## Work Experience
{% for role in work_experience %}
### {{ role.title }} @ {{ role.organization }}
{{ role.summary }}
{% if role.linked_projects %}
*Related Projects:* {% for p in role.linked_projects %}[{{ p.name }}]({{ p.url }}){% if not loop.last %}, {% endif %}{% endfor %}
{% endif %}
{% endfor %}
{% endmacro %}




{% block body %}
# {{ identity.name }}
{{ identity.tagline }}

{# --- LAYOUT LOGIC --- #}
{# Important! No Leading whitepspace, this messes up the markdown formatter, etc. #}
{% if config.modes.current == "job_hunting" %}
{{ section_skills() }}
{{ section_resumes() }}
{{ section_experience() }}
{{ section_projects() }}
{% elif config.modes.current == "self_promotion" %}
{{ section_skills() }}
{{ section_talks() }}
{{ section_projects() }}
{% else %}
{# Default: Project Promotion #}
{{ section_projects() }}
{{ section_skills() }}
{% endif %}
{% endblock %}